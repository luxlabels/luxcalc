<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pack Prices Calculator</title>
<style>
  :root{--bg:#0f0f10;--card:#16171a;--ink:#ffffff;--muted:#b7bcc7;--border:#2b2d31;--focus:#5b9dff}
  *{box-sizing:border-box}html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,"Apple Color Emoji","Segoe UI Emoji";line-height:1.45}
  header{padding:24px 18px 8px;text-align:center}
  h1{margin:0;font-size:clamp(1.25rem,1rem + 2vw,2rem)}
  .wrap{max-width:1000px;margin:0 auto;padding:8px 18px 36px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;margin-top:14px;box-shadow:0 1px 0 rgba(255,255,255,.03) inset, 0 10px 30px rgba(0,0,0,.25)}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media (min-width:860px){.grid{grid-template-columns:repeat(3,1fr)}.grid .wide{grid-column:span 3}}
  label{font-size:.9rem;color:var(--muted);display:block;margin-bottom:6px}
  select,input[type="number"],input[type="text"]{width:100%;padding:12px;border-radius:12px;border:1px solid var(--border);background:#0b0c0f;color:var(--ink);font-size:1rem}
  select:focus,input:focus{border-color:var(--focus);box-shadow:0 0 0 3px rgba(91,157,255,.25);outline:0}
  .muted{color:var(--muted);font-size:.9rem}
  .btn{display:inline-block;padding:12px 16px;border-radius:12px;border:1px solid var(--border);background:linear-gradient(180deg,#2a2b31,#1a1b22);color:var(--ink);text-decoration:none;cursor:pointer}
  .btn:active{transform:scale(.98)}
  .btn.secondary{background:linear-gradient(180deg,#1e2026,#12141a)}
  .btn.danger{background:linear-gradient(180deg,#2b1e1e,#1a1111);border-color:#3d2222}
  .note{font-size:.9rem;color:var(--muted)}
  .pill{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:#0b0c0f;color:var(--muted);font-size:.8rem;margin-left:6px}
  .hidden{display:none !important}
  .table{width:100%;border-collapse:collapse;margin-top:12px}
  .table th,.table td{border-bottom:1px solid var(--border);padding:10px;text-align:left;vertical-align:top}
  .table th{color:var(--muted);font-weight:600}
  .right{text-align:right}
  .totals{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
  .totals .box{background:#0b0c0f;border:1px solid var(--border);border-radius:12px;padding:12px;text-align:center}
  .totals .value{font-size:1.25rem;font-weight:700;margin-top:4px}
  footer{color:var(--muted);text-align:center;padding:24px 0 40px}
  .instructions{margin-top:14px;border-top:1px dashed var(--border);padding-top:12px}
  .ok{color:#9be28a} .warn{color:#ffd25b}
</style>
</head>
<body>
<header>
  <h1>Pack Prices – Instant Calculator</h1>
  <div class="muted">Build an order with one or more items, then copy or email the full quote.</div>
</header>

<div class="wrap">
  <div class="card" id="builder">
    <div class="grid">
      <div>
        <label for="size">Pack Size</label>
        <select id="size" aria-label="Pack Size">
          <option value="3.5g">3.5g (10 × 12.5cm) & Vape (6 × 16cm)</option>
          <option value="28g">28g (13 × 21cm)</option>
          <option value="125g">125g (18 × 29cm)</option>
          <option value="250g">250g / 1/2 LB (23 × 34cm)</option>
          <option value="500g">500g / 1 LB (30 × 40cm)</option>
        </select>
      </div>
      <div>
        <label for="option">Product Option</label>
        <select id="option" aria-label="Product Option">
          <option value="stickersOnly">Stickers Only</option>
          <option value="stickersBags">Stickers + Bags (separate)</option>
          <option value="prelabelled">Pre-Labelled Bags (stuck on)</option>
          <option value="bagsOnly">Bags Only (packs)</option>
        </select>
      </div>
      <div id="finishWrap">
        <label for="finish">Finish</label>
        <select id="finish" aria-label="Finish">
          <option value="gloss">Gloss / Matt</option>
          <option value="holo">Holographic / Glitter</option>
        </select>
      </div>

      <div id="qtyWrap" class="wide">
        <label for="qty">Quantity</label>
        <input type="number" id="qty" step="1" inputmode="numeric" placeholder="e.g. 100" aria-label="Quantity" />
        <div class="note" id="tierHint"></div>
      </div>

      <div id="packWrap" class="wide hidden">
        <label for="packCount">Select Pack Size (Bags Only)</label>
        <select id="packCount" aria-label="Pack size for Bags Only">
          <option value="50">Pack of 50</option>
          <option value="100">Pack of 100</option>
          <option value="250">Pack of 250</option>
          <option value="500">Pack of 500</option>
          <option value="1000">Pack of 1000</option>
        </select>
      </div>

      <div>
        <label for="aiQty">Basic Design (per artwork, £50 each)</label>
        <input type="number" id="aiQty" min="0" step="1" value="0" aria-label="Basic design quantity" />
      </div>
      <div>
        <label for="illQty">Hand-Drawn Illustration (per artwork, £100 each)</label>
        <input type="number" id="illQty" min="0" step="1" value="0" aria-label="Illustration quantity" />
      </div>
      <div class="wide">
        <button class="btn" id="addItem" type="button">Add item to order</button>
        <span class="note" id="addHint"></span>
      </div>
    </div>

    <div class="note" style="margin-top:6px">
      Quantity typing is free — minimums are enforced when you add the item. For Bags Only (not 500g), choose a fixed pack size.
    </div>
  </div>

  <div class="card" id="orderCard">
    <h3 style="margin:0 0 10px 0">Your order</h3>
    <table class="table" id="orderTable">
      <thead>
        <tr>
          <th>Item</th>
          <th class="right">Unit</th>
          <th class="right">Qty</th>
          <th class="right">Add-ons</th>
          <th class="right">Subtotal</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="orderBody">
        <tr><td colspan="6" class="muted">No items yet — add your first item above.</td></tr>
      </tbody>
    </table>

    <div class="totals">
      <div class="box">
        <div class="muted">Items total</div>
        <div class="value" id="itemsTotal">£0.00</div>
      </div>
      <div class="box">
        <div class="muted">Grand total</div>
        <div class="value" id="grandTotal">£0.00</div>
      </div>
    </div>

    <div class="btn-row">
      <button class="btn" id="copyQuote" type="button">Copy Quote Info</button>
      <button class="btn secondary" id="shareBtn" type="button">Share…</button>
      <button class="btn secondary" id="emailBtn" type="button">Email this quote</button>
      <span class="muted" id="copyMsg"></span>
    </div>
    <div class="note" style="margin-top:6px">Use this to copy and paste all the above information to us by email.</div>

    <div class="instructions">
      <div class="note">
        When you’re ready, send your copied quote info to <strong>weeprints3@gmail.com</strong> along with any artwork/design you already have.
      </div>
    </div>
  </div>
</div>

<footer>© Pack Prices</footer>

<script>
(function(){
  const priceData = {
    tiers: [
      { min:50, max:99, label:"50–99" },
      { min:100, max:249, label:"100–249" },
      { min:250, max:499, label:"250–499" },
      { min:500, max:999, label:"500–999" },
      { min:1000, max:Infinity, label:"1000+" }
    ],
    "3.5g": {
      stickerOnly: { gloss:[0.50,0.43,0.40,0.32,0.30], holo:[0.75,0.64,0.60,0.48,0.45] },
      stickersBags: { gloss:[0.65,0.58,0.55,0.42,0.40], holo:[0.87,0.76,0.72,0.58,0.55] },
      prelabelled: { gloss:[1.20,0.80,0.70,0.65,0.62], holo:[1.45,1.00,0.90,0.81,0.77] },
      bagsOnlyPacks: { 50:8, 100:15, 250:35, 500:65, 1000:120 }
    },
    "28g": {
      stickerOnly: { gloss:[1.07,0.95,0.88,0.75,0.68], holo:[1.65,1.42,1.32,1.12,1.02] },
      stickersBags: { gloss:[1.29,1.17,1.10,0.90,0.83], holo:[1.87,1.64,1.54,1.27,1.17] },
      prelabelled: { gloss:[1.69,1.58,1.50,1.30,1.23], holo:[2.27,2.05,1.94,1.67,1.57] },
      bagsOnlyPacks: { 50:12, 100:22, 250:55, 500:95, 1000:175 }
    },
    "125g": {
      stickerOnly: { gloss:[2.00,1.85,1.70,1.45,1.25], holo:[3.00,2.77,2.55,2.17,1.87] },
      stickersBags: { gloss:[2.45,2.30,2.15,1.75,1.55], holo:[3.45,3.22,2.90,2.47,2.17] },
      prelabelled: { gloss:[3.10,2.95,2.80,2.40,2.20], holo:[4.10,3.87,3.55,3.12,2.82] },
      bagsOnlyPacks: { 50:28, 100:50, 250:115, 500:170, 1000:300 }
    },
    "250g": {
      stickerOnly: { gloss:[2.95,2.73,2.40,2.14,1.85], holo:[4.50,4.09,3.60,3.21,2.77] },
      stickersBags: { gloss:[3.40,3.18,2.85,2.44,2.15], holo:[4.95,4.54,4.05,3.51,3.07] },
      prelabelled: { gloss:[4.05,3.83,3.50,3.09,2.80], holo:[5.60,5.19,4.70,4.16,3.72] },
      bagsOnlyPacks: { 50:28, 100:50, 250:115, 500:170, 1000:300 }
    },
    "500g": {
      tiers: [
        { min:1, max:1, label:"1" },
        { min:2, max:2, label:"2" },
        { min:5, max:5, label:"5" },
        { min:10, max:10, label:"10" },
        { min:20, max:Infinity, label:"20+" }
      ],
      stickerOnly: { gloss:[6,4.5,4,3.5,3], holo:[9,6.75,6,5.25,4.5] },
      stickersBags: { gloss:[7,5.5,5,4.5,4], holo:[10,7.75,7,6.25,5.5] },
      prelabelled: { gloss:[10,7.5,7,6.5,6], holo:[13,10.75,9,8.25,7.5] },
      bagsOnlyPerUnit: [2, 1.75, 1.5, 1.2, 1.0]
    }
  };

  const $ = (id)=>document.getElementById(id);
  const sizeEl = $('size'), optionEl = $('option'), finishEl = $('finish');
  const qtyEl = $('qty'), packWrap = $('packWrap'), packCountEl = $('packCount'), finishWrap = $('finishWrap'), qtyWrap = $('qtyWrap');
  const aiQtyEl = $('aiQty'), illQtyEl = $('illQty'), addBtn = $('addItem'), addHint = $('addHint');
  const orderBody = $('orderBody'), itemsTotalEl = $('itemsTotal'), grandTotalEl = $('grandTotal');
  const copyBtn = $('copyQuote'), shareBtn = $('shareBtn'), emailBtn = $('emailBtn'), copyMsg = $('copyMsg');
  const tierHintEl = $('tierHint');

  const formatGBP = n => new Intl.NumberFormat('en-GB',{style:'currency',currency:'GBP'}).format(n);
  const getTiers = size => (size==='500g') ? priceData['500g'].tiers : priceData.tiers;
  const getTierIndex = (size,q)=>{ const t=getTiers(size); for(let i=0;i<t.length;i++){ if(q>=t[i].min&&q<=t[i].max) return i; } return -1; };

  function updateUI(){
    const size=sizeEl.value, opt=optionEl.value;
    const usePacks = (opt==='bagsOnly' && size!=='500g');
    finishWrap.classList.toggle('hidden', opt==='bagsOnly');
    packWrap.classList.toggle('hidden', !usePacks);
    qtyWrap.classList.toggle('hidden', usePacks);

    if(usePacks){
      tierHintEl.textContent = "Bags Only is sold in fixed packs: 50, 100, 250, 500, or 1000.";
    } else {
      const raw = parseInt(qtyEl.value||'0',10);
      if (!raw) { tierHintEl.textContent = (size==='500g') ? "Enter 1, 2, 5, 10, 20+." : "Enter a quantity (min 50)."; }
      else {
        const idx = getTierIndex(size, raw);
        if(idx===-1){ tierHintEl.textContent = (size==='500g') ? "Use 1, 2, 5, 10 or 20+." : "Minimum is 50."; }
        else { tierHintEl.textContent = "Current tier: " + getTiers(size)[idx].label; }
      }
    }
  }

  function enforceMinimums(size,opt,value){
    if (opt==='bagsOnly' && size!=='500g') return null;
    const v = parseInt(value||'0',10);
    if (size==='500g') return Math.max(1, v||0);
    return Math.max(50, v||0);
  }

  const order = [];

  function computeUnit(size,opt,finish,qtyOrIdx){
    if (opt==='bagsOnly' && size!=='500g') return { unit:null, note:`Bags Only – pack of ${qtyOrIdx}` };
    if (size==='500g' && opt==='bagsOnly'){
      const idx = qtyOrIdx;
      const unit = priceData['500g'].bagsOnlyPerUnit[idx];
      return { unit, note:'Bags Only' };
    }
    const idx = getTierIndex(size, qtyOrIdx);
    const mapKey=(opt==='stickersOnly')?'stickerOnly':(opt==='stickersBags'?'stickersBags':'prelabelled');
    const unit = priceData[size][mapKey][finish][idx];
    const note = (finish==='gloss')?'Gloss / Matt':'Holographic / Glitter';
    return { unit, note };
  }

  function addItem(){
    const size = sizeEl.value, opt = optionEl.value, finish = finishEl.value;
    const usePacks = (opt==='bagsOnly' && size!=='500g');
    const ai = Math.max(0, parseInt(aiQtyEl.value||'0',10));
    const ill = Math.max(0, parseInt(illQtyEl.value||'0',10));

    let qty, pack=null, tierIdx=null;
    if(usePacks){
      pack = parseInt(packCountEl.value,10);
      qty = pack;
    } else {
      const enforced = enforceMinimums(size,opt, qtyEl.value);
      if (!enforced || isNaN(enforced)) { addHint.textContent = "Please enter a valid quantity."; return; }
      qty = enforced;
      qtyEl.value = qty;
      tierIdx = getTierIndex(size, qty);
      if (tierIdx === -1){ addHint.textContent = (size==='500g') ? "Use 1, 2, 5, 10 or 20+." : "Minimum is 50."; return; }
    }

    let unit, unitNote, itemsSubtotal;
    if (usePacks){
      const price=(priceData[size].bagsOnlyPacks||{})[pack]||0;
      unit = null; unitNote = `Bags Only – pack of ${pack}`;
      itemsSubtotal = price;
    } else if (size==='500g' && opt==='bagsOnly'){
      const {unit:u, note} = computeUnit(size,opt,finish, tierIdx);
      unit = u; unitNote = note;
      itemsSubtotal = unit * qty;
    } else {
      const {unit:u, note} = computeUnit(size,opt,finish, qty);
      unit = u; unitNote = note;
      itemsSubtotal = unit * qty;
    }

    const addons = ai*50 + ill*100;
    const lineTotal = itemsSubtotal + addons;

    const line = { size, opt, finish, qty, pack, tierIdx, ai, ill, unit, unitNote, itemsSubtotal, addons, lineTotal };
    order.push(line);
    renderOrder();
    addHint.textContent = "Item added."; setTimeout(()=>addHint.textContent="",1800);
  }

  function removeItem(idx){
    order.splice(idx,1);
    renderOrder();
  }

  function renderOrder(){
    orderBody.innerHTML = "";
    if(order.length===0){
      orderBody.innerHTML = '<tr><td colspan="6" class="muted">No items yet — add your first item above.</td></tr>';
    } else {
      order.forEach((line, i)=>{
        const sizeText = sizeEl.querySelector(`option[value="${line.size}"]`).text;
        const optText = optionEl.querySelector(`option[value="${line.opt}"]`).text;
        const finishText = (line.opt==='bagsOnly') ? '' : ' • ' + (line.finish==='gloss'?'Gloss / Matt':'Holographic / Glitter');
        const itemLabel = `${sizeText} — ${optText}${finishText}`;

        const unitStr = (line.unit===null) ? '—' : formatGBP(line.unit);
        const qtyStr = (line.pack ? `Pack of ${line.pack}` : `${line.qty}`);
        const addonsStr = (line.addons>0) ? `Basic ×${line.ai}, Illus ×${line.ill}` : '—';
        const subtotalStr = formatGBP(line.lineTotal);

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${itemLabel}<div class="muted">${line.unitNote}</div></td>
          <td class="right">${unitStr}</td>
          <td class="right">${qtyStr}</td>
          <td class="right">${addonsStr}</td>
          <td class="right">${subtotalStr}</td>
          <td class="right"><button class="btn danger" data-idx="${i}">Remove</button></td>
        `;
        orderBody.appendChild(tr);
      });
    }

    const itemsTotal = order.reduce((s,l)=>s + l.itemsSubtotal, 0);
    const grandTotal = order.reduce((s,l)=>s + l.lineTotal, 0);
    itemsTotalEl.textContent = formatGBP(itemsTotal);
    grandTotalEl.textContent = formatGBP(grandTotal);

    [...orderBody.querySelectorAll('button[data-idx]')].forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const idx = parseInt(e.currentTarget.getAttribute('data-idx'),10);
        removeItem(idx);
      });
    });
  }

  function buildSummary(){
    const lines = [];
    lines.push("Pack Prices – Quote");
    if (order.length===0){
      lines.push("(No items)");
    } else {
      order.forEach((l, i)=>{
        const sizeText = document.querySelector(`#size option[value="${l.size}"]`).text;
        const optText = document.querySelector(`#option option[value="${l.opt}"]`).text;
        const finishText = (l.opt==='bagsOnly') ? '' : ' • ' + (l.finish==='gloss'?'Gloss / Matt':'Holographic / Glitter');
        const header = `${i+1}. ${sizeText} — ${optText}${finishText}`;
        const unitStr = (l.unit===null)? '' : `Unit: ${formatGBP(l.unit)}`;
        const qtyStr = l.pack ? `Pack of ${l.pack}` : `Qty: ${l.qty}`;
        const tier = (l.tierIdx!=null && l.opt!=='bagsOnly') ? `Tier: ${getTiers(l.size)[l.tierIdx].label}` : '';
        const addons = (l.ai||l.ill) ? `Add-ons: Basic ×${l.ai||0}${l.ill?`, Illustration ×${l.ill}`:''}` : 'Add-ons: none';
        const subtotal = `Subtotal: ${formatGBP(l.lineTotal)}`;
        lines.push(header);
        lines.push([qtyStr, tier, unitStr].filter(Boolean).join(" • "));
        lines.push(addons);
        lines.push(subtotal);
      });
    }
    lines.push(`Grand total: ${grandTotalEl.textContent}`);
    lines.push("—");
    lines.push("Please reply with your name and delivery details.");
    return lines.join("\n");
  }

  async function copyToClipboard(text){
    try{
      if (navigator.clipboard && navigator.clipboard.writeText) {
        await navigator.clipboard.writeText(text);
        return true;
      }
    }catch(e){}
    try{
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.setAttribute('readonly','');
      ta.style.position='fixed'; ta.style.top='0'; ta.style.left='-9999px';
      document.body.appendChild(ta);
      if (/ipad|iphone|ipod/i.test(navigator.userAgent)) {
        const range = document.createRange(); range.selectNodeContents(ta);
        const sel = window.getSelection(); sel.removeAllRanges(); sel.addRange(range);
        ta.setSelectionRange(0, 999999);
      } else { ta.select(); }
      const ok = document.execCommand('copy');
      document.body.removeChild(ta);
      if (ok) return true;
    }catch(e){}
    return false;
  }

  async function onCopy(){
    const ok = await copyToClipboard(buildSummary());
    if(ok){ copyMsg.textContent="Quote copied! Paste into your email."; copyMsg.className="muted ok"; }
    else { copyMsg.textContent="Copy not supported here. Select & copy text after tapping Email."; copyMsg.className="muted warn"; }
    setTimeout(()=>{ copyMsg.textContent=""; copyMsg.className="muted"; }, 3500);
  }
  function onShare(){
    const text=buildSummary();
    if(navigator.share){ navigator.share({ title:"Pack Prices Quote", text }).catch(()=>{}); }
    else { onCopy(); }
  }
  function onEmail(){
    const subject = encodeURIComponent("new quote");
    const body = encodeURIComponent(buildSummary() + "\n\n(Attach any artwork/design you already have.)");
    window.location.href = `mailto:weeprints3@gmail.com?subject=${subject}&body=${body}`;
  }

  [sizeEl, optionEl, finishEl, qtyEl, packCountEl, aiQtyEl, illQtyEl].forEach(el=>{
    el.addEventListener('input', updateUI);
    el.addEventListener('change', updateUI);
  });
  addBtn.addEventListener('click', addItem);
  copyBtn.addEventListener('click', onCopy);
  shareBtn.addEventListener('click', onShare);
  emailBtn.addEventListener('click', onEmail);

  updateUI();
  renderOrder();
})();
</script>
</body>
</html>