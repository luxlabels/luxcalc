<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pack Prices Calculator</title>
<style>
  :root{--bg:#0f0f10;--card:#16171a;--ink:#ffffff;--muted:#b7bcc7;--accent:#e6e6e6;--border:#2b2d31;--focus:#5b9dff}
  *{box-sizing:border-box}html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--ink);font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";line-height:1.45}
  header{padding:24px 18px 8px;text-align:center}
  h1{margin:0;font-size:clamp(1.25rem,1rem + 2vw,2rem);letter-spacing:.4px}
  .wrap{max-width:900px;margin:0 auto;padding:8px 18px 36px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;margin-top:14px;box-shadow:0 1px 0 rgba(255,255,255,.03) inset, 0 10px 30px rgba(0,0,0,.25)}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media (min-width:760px){.grid{grid-template-columns:repeat(3,1fr)}.grid .wide{grid-column:span 3}.grid .half{grid-column:span 1}}
  label{font-size:.9rem;color:var(--muted);display:block;margin-bottom:6px}
  select,input[type="number"],input[type="text"]{width:100%;padding:12px 12px;border-radius:12px;border:1px solid var(--border);background:#0b0c0f;color:var(--ink);outline:none;font-size:1rem}
  select:focus,input:focus{border-color:var(--focus);box-shadow:0 0 0 3px rgba(91,157,255,.25)}
  .muted{color:var(--muted);font-size:.9rem}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .row .grow{flex:1}
  .totals{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .totals .box{background:#0b0c0f;border:1px solid var(--border);border-radius:12px;padding:12px;text-align:center}
  .totals .value{font-size:1.25rem;font-weight:700;margin-top:4px}
  .btn{display:inline-block;padding:12px 16px;border-radius:12px;border:1px solid var(--border);background:linear-gradient(180deg,#2a2b31,#1a1b22);color:var(--ink);text-decoration:none;cursor:pointer;transition:.15s transform ease;font-weight:600}
  .btn:active{transform:scale(.98)}
  .note{font-size:.9rem;color:var(--muted)}
  .pill{display:inline-block;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:#0b0c0f;color:var(--muted);font-size:.8rem;margin-left:6px}
  .flex-between{display:flex;justify-content:space-between;align-items:center;gap:10px}
  .warn{color:#ffd25b}
  footer{color:var(--muted);text-align:center;padding:24px 0 40px}
  .hidden{display:none !important}
</style>
</head>
<body>
<header>
  <h1>Pack Prices – Instant Calculator</h1>
  <div class="muted">Quickly work out unit prices and order totals for any size, finish, and quantity.</div>
</header>
<div class="wrap">
  <div class="card">
    <div class="grid">
      <div>
        <label for="size">Pack Size</label>
        <select id="size">
          <option value="3.5g">3.5g (10 × 12.5cm) & Vape (6 × 16cm)</option>
          <option value="28g">28g (13 × 21cm)</option>
          <option value="125g">125g (18 × 29cm)</option>
          <option value="250g">250g / 1/2 LB (23 × 34cm)</option>
          <option value="500g">500g / 1 LB (30 × 40cm)</option>
        </select>
      </div>
      <div>
        <label for="option">Product Option</label>
        <select id="option">
          <option value="stickersOnly">Stickers Only</option>
          <option value="stickersBags">Stickers + Bags (separate)</option>
          <option value="prelabelled">Pre‑Labelled Bags (stuck on)</option>
          <option value="bagsOnly">Bags Only (packs)</option>
        </select>
      </div>
      <div id="finishWrap">
        <label for="finish">Finish</label>
        <select id="finish">
          <option value="gloss">Gloss / Matt</option>
          <option value="holo">Holographic / Glitter</option>
        </select>
      </div>
      <div id="qtyWrap" class="wide">
        <label for="qty">Quantity</label>
        <input type="number" id="qty" min="50" step="1" value="50" />
        <div class="note" id="tierHint"></div>
      </div>
      <div id="packWrap" class="wide hidden">
        <label for="packCount">Select Pack Size (Bags Only)</label>
        <select id="packCount">
          <option value="50">Pack of 50</option>
          <option value="100">Pack of 100</option>
          <option value="250">Pack of 250</option>
          <option value="500">Pack of 500</option>
          <option value="1000">Pack of 1000</option>
        </select>
      </div>
    </div>
    <div class="card">
      <div class="row">
        <label class="grow"><input type="checkbox" id="addAI" /> Add Pack Design – Incorporating AI (+£50 one‑off)</label>
      </div>
      <div class="row" style="margin-top:6px">
        <label class="grow"><input type="checkbox" id="addIllustration" /> Add Hand‑Drawn Illustration (+£100 one‑off)</label>
      </div>
    </div>

    <div class="grid" style="margin-top:14px">
      <div class="totals wide">
        <div class="box">
          <div class="muted">Unit Price</div>
          <div class="value" id="unitPrice">£0.00</div>
          <div class="note" id="unitNote"></div>
        </div>
        <div class="box">
          <div class="muted">Total (incl. add‑ons)</div>
          <div class="value" id="totalPrice">£0.00</div>
          <div class="note" id="totalNote"></div>
        </div>
      </div>
    </div>

    <div class="row" style="margin-top:14px">
      <button class="btn" id="copyQuote" type="button">Copy shareable quote</button>
      <span class="muted" id="copyMsg"></span>
    </div>
  </div>

  <div class="card">
    <div class="flex-between">
      <div class="muted">Tier Guidance</div>
      <span class="pill" id="tierLabel">—</span>
    </div>
    <div class="note" style="margin-top:8px" id="tierRules">
      Minimums vary by size. Enter your quantity to see the best tier and price.
    </div>
  </div>

  <footer>
    <div id="supportLine">Calculator ready.</div>
  </footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
  // ------- PRICE TABLES (GBP) -------
  const priceData = {
    tiers: [
      { min:50, max:99, label:"50–99" },
      { min:100, max:249, label:"100–249" },
      { min:250, max:499, label:"250–499" },
      { min:500, max:999, label:"500–999" },
      { min:1000, max:Infinity, label:"1000+" }
    ],
    "3.5g": {
      stickerOnly: { gloss:[0.50,0.43,0.40,0.32,0.30], holo:[0.75,0.64,0.60,0.48,0.45] },
      stickersBags: { gloss:[0.65,0.58,0.55,0.42,0.40], holo:[0.87,0.76,0.72,0.58,0.55] },
      prelabelled: { gloss:[1.20,0.80,0.70,0.65,0.62], holo:[1.45,1.00,0.90,0.81,0.77] },
      bagsOnlyPacks: { 50:8, 100:15, 250:35, 500:65, 1000:120 }
    },
    "28g": {
      stickerOnly: { gloss:[1.07,0.95,0.88,0.75,0.68], holo:[1.65,1.42,1.32,1.12,1.02] },
      stickersBags: { gloss:[1.29,1.17,1.10,0.90,0.83], holo:[1.87,1.64,1.54,1.27,1.17] },
      prelabelled: { gloss:[1.69,1.58,1.50,1.30,1.23], holo:[2.27,2.05,1.94,1.67,1.57] },
      bagsOnlyPacks: { 50:12, 100:22, 250:55, 500:95, 1000:175 }
    },
    "125g": {
      stickerOnly: { gloss:[2.00,1.85,1.70,1.45,1.25], holo:[3.00,2.77,2.55,2.17,1.87] },
      stickersBags: { gloss:[2.45,2.30,2.15,1.75,1.55], holo:[3.45,3.22,2.90,2.47,2.17] },
      prelabelled: { gloss:[3.10,2.95,2.80,2.40,2.20], holo:[4.10,3.87,3.55,3.12,2.82] },
      bagsOnlyPacks: { 50:28, 100:50, 250:115, 500:170, 1000:300 }
    },
    "250g": {
      stickerOnly: { gloss:[2.95,2.73,2.40,2.14,1.85], holo:[4.50,4.09,3.60,3.21,2.77] },
      stickersBags: { gloss:[3.40,3.18,2.85,2.44,2.15], holo:[4.95,4.54,4.05,3.51,3.07] },
      prelabelled: { gloss:[4.05,3.83,3.50,3.09,2.80], holo:[5.60,5.19,4.70,4.16,3.72] },
      bagsOnlyPacks: { 50:28, 100:50, 250:115, 500:170, 1000:300 }
    },
    "500g": {
      tiers: [
        { min:1, max:1, label:"1" },
        { min:2, max:2, label:"2" },
        { min:5, max:5, label:"5" },
        { min:10, max:10, label:"10" },
        { min:20, max:Infinity, label:"20+" }
      ],
      stickerOnly: { gloss:[6,4.5,4,3.5,3], holo:[9,6.75,6,5.25,4.5] },
      stickersBags: { gloss:[7,5.5,5,4.5,4], holo:[10,7.75,7,6.25,5.5] },
      prelabelled: { gloss:[10,7.5,7,6.5,6], holo:[13,10.75,9,8.25,7.5] },
      bagsOnlyPerUnit: [2, 1.75, 1.5, 1.2, 1.0]
    }
  };

  const sizeEl = document.getElementById('size');
  const optionEl = document.getElementById('option');
  const finishEl = document.getElementById('finish');
  const qtyEl = document.getElementById('qty');
  const tierHintEl = document.getElementById('tierHint');
  const packWrap = document.getElementById('packWrap');
  const packCountEl = document.getElementById('packCount');
  const finishWrap = document.getElementById('finishWrap');
  const qtyWrap = document.getElementById('qtyWrap');
  const unitPriceEl = document.getElementById('unitPrice');
  const unitNoteEl = document.getElementById('unitNote');
  const totalPriceEl = document.getElementById('totalPrice');
  const totalNoteEl = document.getElementById('totalNote');
  const tierLabelEl = document.getElementById('tierLabel');
  const tierRulesEl = document.getElementById('tierRules');
  const addAI = document.getElementById('addAI');
  const addIllustration = document.getElementById('addIllustration');
  const copyBtn = document.getElementById('copyQuote');
  const copyMsg = document.getElementById('copyMsg');

  function formatGBP(n){
    if (!isFinite(n)) return "£0.00";
    return new Intl.NumberFormat('en-GB',{style:'currency',currency:'GBP'}).format(n);
  }

  function getTiersFor(sizeKey){
    return (sizeKey === '500g') ? priceData['500g'].tiers : priceData.tiers;
  }

  function getTierIndex(sizeKey, quantity){
    const tiers = getTiersFor(sizeKey);
    for (let i=0;i<tiers.length;i++){
      const t = tiers[i];
      if (quantity >= t.min && quantity <= t.max) return i;
    }
    return -1;
  }

  function updateUIRules(){
    const sizeKey = sizeEl.value;
    const opt = optionEl.value;
    const usePacks = (opt === 'bagsOnly' && sizeKey !== '500g');
    finishWrap.classList.toggle('hidden', opt === 'bagsOnly');
    packWrap.classList.toggle('hidden', !usePacks);
    qtyWrap.classList.toggle('hidden', usePacks);
    if (usePacks){
      tierRulesEl.innerText = "Bags Only is sold in fixed packs: 50, 100, 250, 500, or 1000.";
      tierLabelEl.innerText = "Pack selection required";
      tierHintEl.innerText = "";
    }else{
      tierRulesEl.innerText = (sizeKey === '500g')
        ? "500g tiers are per-unit: 1, 2, 5, 10 or 20+."
        : "Minimum order 50; tiers: 50–99, 100–249, 250–499, 500–999, 1000+.";
      const q = parseInt(qtyEl.value || '0', 10);
      const idx = getTierIndex(sizeKey, q);
      if (idx === -1){
        tierHintEl.innerHTML = (sizeKey === '500g')
          ? '<span class="warn">Enter a quantity of 1, 2, 5, 10, or 20+.</span>'
          : '<span class="warn">Enter a quantity of at least 50.</span>';
        tierLabelEl.innerText = "—";
      }else{
        const label = getTiersFor(sizeKey)[idx].label;
        tierHintEl.innerText = `Current tier: ${label}`;
        tierLabelEl.innerText = label;
      }
    }
  }

  function calculate(){
    try{
      const sizeKey = sizeEl.value;
      const opt = optionEl.value;
      const finish = finishEl.value;
      updateUIRules();

      let unit = null;
      let qty = 0;
      let subtotal = 0;
      let note = "";
      let tierText = "";

      if (opt === 'bagsOnly' && sizeKey !== '500g'){
        const pk = parseInt(packCountEl.value,10);
        const packPrices = priceData[sizeKey].bagsOnlyPacks || {};
        const packPrice = Number(packPrices[pk]) || 0;
        qty = pk;
        subtotal = packPrice;
        unitPriceEl.textContent = "—";
        unitNoteEl.textContent = `Bags Only – pack of ${pk}`;
        tierText = `Pack of ${pk}`;
      } else {
        qty = Math.max(1, parseInt(qtyEl.value || '0', 10));
        const idx = getTierIndex(sizeKey, qty);
        if (idx === -1){
          unitPriceEl.textContent = "£0.00";
          unitNoteEl.textContent = "";
          totalPriceEl.textContent = "£0.00";
          totalNoteEl.textContent = "";
          return;
        }
        if (sizeKey === '500g' && opt === 'bagsOnly'){
          unit = priceData['500g'].bagsOnlyPerUnit[idx];
          note = "Bags Only";
        } else {
          const mapKey = (opt === 'stickersOnly') ? 'stickerOnly' : (opt === 'stickersBags' ? 'stickersBags' : 'prelabelled');
          const table = priceData[sizeKey][mapKey];
          const prices = table ? table[finish] : null;
          unit = prices ? Number(prices[idx]) : 0;
          note = (finish === 'gloss') ? 'Gloss / Matt' : 'Holographic / Glitter';
        }
        subtotal = Number(unit) * Number(qty);
        unitPriceEl.textContent = formatGBP(unit || 0);
        unitNoteEl.textContent = note;
        const tiers = getTiersFor(sizeKey);
        tierText = `Tier: ${tiers[idx].label}`;
      }

      let addons = 0;
      addons += addAI.checked ? 50 : 0;
      addons += addIllustration.checked ? 100 : 0;

      const total = Number(subtotal) + Number(addons);
      totalPriceEl.textContent = formatGBP(total);
      totalNoteEl.textContent = (addons > 0) ? `Includes add‑ons: ${formatGBP(addons)} one‑off` : "No add‑ons selected";
    }catch(err){
      console.error(err);
      totalPriceEl.textContent = "£0.00";
      unitPriceEl.textContent = "£0.00";
    }
  }

  function copyQuoteToClipboard(){
    try{
      const sizeKeyText = sizeEl.options[sizeEl.selectedIndex].text;
      const optText = optionEl.options[optionEl.selectedIndex].text;
      const finishText = finishWrap.classList.contains('hidden') ? '' : ` • ${finishEl.options[finishEl.selectedIndex].text}`;
      const qtyText = packWrap.classList.contains('hidden')
        ? `Qty: ${qtyEl.value}`
        : `${packCountEl.options[packCountEl.selectedIndex].text}`;
      const unitText = unitPriceEl.innerText === "—" ? "" : `Unit: ${unitPriceEl.innerText}`;
      const totalText = `Total: ${totalPriceEl.innerText}`;
      const addons = [];
      if (addAI.checked) addons.push("AI Design (+£50)");
      if (addIllustration.checked) addons.push("Illustration (+£100)");
      const addonsText = addons.length ? `Add‑ons: ${addons.join(", ")}` : "Add‑ons: none";
      const tier = document.getElementById('tierLabel').innerText;
      const tierText = tier && tier !== "—" ? `Tier: ${tier}` : "";
      const lines = ["Pack Prices – Quote", sizeKeyText, `${optText}${finishText}`, qtyText, tierText, unitText, totalText, addonsText].filter(Boolean);
      if (navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(lines.join("\n")).then(()=>{
          copyMsg.textContent="Quote copied!"; setTimeout(()=>copyMsg.textContent="",2000);
        }).catch(()=>{ copyMsg.textContent="Could not copy."; setTimeout(()=>copyMsg.textContent="",2000); });
      }else{
        copyMsg.textContent="Copy not supported"; setTimeout(()=>copyMsg.textContent="",2000);
      }
    }catch(e){
      copyMsg.textContent="Could not copy."; setTimeout(()=>copyMsg.textContent="",2000);
    }
  }

  // Listeners
  [sizeEl, optionEl, finishEl, qtyEl, packCountEl, addAI, addIllustration].forEach(el=>{
    el.addEventListener('input', calculate);
    el.addEventListener('change', calculate);
  });

  optionEl.addEventListener('change', ()=>{
    const isBagsOnly = optionEl.value === 'bagsOnly';
    if (isBagsOnly){
      if (sizeEl.value === '500g'){ qtyEl.min=1; qtyEl.value = 1; }
      else { packCountEl.value = "50"; }
    }else{
      qtyEl.value = (sizeEl.value === '500g') ? 1 : 50;
    }
    calculate();
  });

  sizeEl.addEventListener('change', ()=>{
    const sizeKey = sizeEl.value;
    if (sizeKey === '500g'){ qtyEl.min=1; if (optionEl.value !== 'bagsOnly' && parseInt(qtyEl.value,10) < 1) qtyEl.value = 1; }
    else { qtyEl.min=50; if (optionEl.value !== 'bagsOnly' && parseInt(qtyEl.value,10) < 50) qtyEl.value = 50; }
    calculate();
  });

  document.getElementById('copyQuote').addEventListener('click', copyQuoteToClipboard);

  // Initial render
  calculate();
});
</script>
</body>
</html>
